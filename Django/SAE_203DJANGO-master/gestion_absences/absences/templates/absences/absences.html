{% extends 'absences/base.html' %}
{% load static %}

{% block content %}
<h2>Absences</h2>

<!-- Formulaire d'ajout -->
<form method="post" enctype="multipart/form-data">
    {% csrf_token %}
    {{ form.as_p }}
    <button type="submit">â• Ajouter une absence</button>
</form>

<hr>

<!-- Liste des absences -->
<ul>
    {% for absence in absences %}
        <li>
            <strong>{{ absence.etudiant }}</strong> â€“
            {{ absence.cours.titre }} ({{ absence.cours.date }}) â€“
            JustifiÃ© : {{ absence.justifie|yesno:"Oui,Non" }}

            {% if absence.justification %}
                â€“ <a href="{{ absence.justification.url }}" target="_blank">ğŸ“ Justificatif</a>
            {% endif %}

            {% if absence.id %}
                â€“ <a href="{% url 'fiche_absence_pdf' absence.id %}" target="_blank">ğŸ§¾ PDF</a>
                <a href="{% url 'modifier_absence' absence.id %}" class="btn-modifier">ğŸ“</a>
                <a href="{% url 'supprimer_absence' absence.id %}" class="btn-supprimer">âœ–ï¸</a>
            {% endif %}
        </li>
    {% empty %}
        <li>Aucune absence enregistrÃ©e.</li>
    {% endfor %}
</ul>
{% endblock %}
